VPC Peering


1. create 2 VPCs . vpc1 and vpc2. (vpc1 10.10.1.0/24    -- vpc2 10.10.2.0/24  )

2. create a single public subnet in both the VPCs. (VPC1 -- (subnet)10.10.1.128/25 -- vpc2 -- subnet 10.10.2.128/25 )

3. create a route and IG in both the VPCs. vpc1-route in VPC1 and vpc2-route in VPC2

4. create IG in both VPCs and attach it to VPC1 AND VPC2. (vpc1-ig AND VPC2-IG)

5. associate subnet to route(VPC1-ROUTE--(subnet)10.10.1.128/25, AND VPC2-ROUTE -- subnet 10.10.2.128/25 ) 

6. ADD NEW ROUTE IN BOTH THE CUSTOM ROUTES vpc1-route & vpc2-route. ( attach vpc1-IG to vpc1-route and vpc2-IG to vpc2-route)

7. launch 2 linux machines in both VPC1 and VPC2. in security groups add ssh, http and ICMP-IPV4 rules.

8. login to instance which is created in VPC1 and try to ping with private IP of second instance which is created in VPC2. by default it will not ping.


9. now enable VPC peering by going into the VPC dashboard. select peering connections -- give name -- select requester -- give vpc1 -- select accepter -- vpc2 -- select -- my account -- cick ok

10.. now click on peering connections, actions -- acept request -- 

11. Once done, go to route tables tab -- select vpc1-route -- add another route -- 10.10.2.0/24 give peering gateweay --click ok. do the same in vpc2-route -- go to route tab, add another route -- 10.10.1.0/24 px peering -- save


12.. now test with ping 